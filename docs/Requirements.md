教学屏幕广播与文件分发系统设计方案
简介
本方案设计一个用于教师机与学生机之间进行屏幕广播和文件传输的系统，适用于机房教学环境（仅考虑Windows平台）。教师端软件可以将教师机屏幕实时广播到所有学生机上，支持强制全屏或窗口化两种显示模式[1]；也允许教师选择某一学生机的屏幕并广播给全班观看。此外，教师端还能向学生机分发文件，学生端也可以上传文件到教师机，实现课堂资料下发和作业提交。系统还需支持音频同步广播（例如教师语音），并在权限设计上以教师端控制为主（教师可强制学生端播放音频）。为方便使用和调试，系统提供完善的UI，包括教师端的控制面板和悬浮工具栏，学生端的最小化客户端，以及配置文件支持（如IP地址、学生信息等）以简化部署。由于开发时间紧迫，本方案重点实现屏幕广播和文件传输两个核心功能，其他功能可简化为MVP版本，但整体设计考虑日后扩展。
系统需求
功能需求：
•	屏幕广播（教师演示）：教师端能够将自己的屏幕画面广播到所有学生端电脑上显示。教师可选择以全屏模式强制学生端观看，或窗口模式让学生端以窗口形式观看[1]。广播过程应尽量实时，帧率和延迟满足演示需求（例如>=10fps，延迟尽可能低）。在广播过程中，学生暂时失去对自己电脑的操作（全屏时），以集中注意力。
•	学生屏幕展示：教师端可以选择某台学生机，将该学生的屏幕内容广播给其他所有学生机观看。此功能用于展示学生的优秀操作。系统需支持将选定学生机屏幕获取过来，并以与教师演示相同的方式广播到其余学生机上。教师界面上应显示当前广播源（教师本人或某学生，以及来源IP/姓名等）以便调试和识别数据来源。
•	文件分发（教师->学生）：教师端可以选择文件并发送给学生端。支持发送单个文件（或多文件）到所有连接的学生机。学生机收到文件后应自动保存在指定目录（如学生桌面或预配置的路径），可选地提示学生或自动打开文件（MVP阶段可只保存不自动打开）。该功能用于下发课件、资料等[2]。
•	文件上传（学生->教师）：学生端可以向教师端上传文件，例如提交作业。学生可在客户端选择文件上传，教师端接收到后将文件存储到教师机指定目录（例如按学生姓名分类的子文件夹）。教师端应有提示或列表显示收到的文件，便于老师查看。
•	音频广播：在屏幕广播的同时支持音频同步传输。例如教师讲话声音或电脑系统声音可以一并传输到学生端播放。教师端可以选择开启/关闭音频广播，学生端可以选择本地静音。但当教师端强制音频播放时，学生端应取消静音保证声音播放。音频主要指教师麦克风输入，必要时也可包括系统音频。音频的延时应与视频保持同步或尽量接近。
•	学生信息显示：每个学生端应用需要配置标识信息（如姓名、学号或座位号），教师端在连接后能够看到所有在线学生的名单、对应IP地址等基本信息。这有助于教师选择特定学生屏幕广播，以及在接收学生上传文件时知道来源。
•	权限与交互：教师端发起的广播和文件发送应不需要学生端确认，自动执行，以免干扰课堂流程。教师端应能够随时停止广播。对于音频和窗口模式等，学生可有有限的控制（如窗口模式的广播学生可自行最小化窗口；音频非强制时学生可静音），但教师可强制覆盖这些设置。当教师停止广播或文件传输完成后，学生端恢复正常操作。
•	用户界面：教师端需要直观的控制界面，包括：
•	学生列表面板（显示各学生机状态、姓名等），方便选择操作；
•	控制按钮或菜单项：开始/停止屏幕广播（教师屏幕）、选择学生屏幕广播、发送文件、查看收到的文件、音频开关等；
•	悬浮工具栏：教师端在屏幕顶部有一个常驻的细条形信息栏，鼠标悬停时展开快捷控制按钮，点击可唤出主控制窗口。该栏显示如当前连接数、当前广播状态/源等信息，便于教师在最小化主界面后仍能快速操作和监控状态。
•	窗口最小化到托盘：教师端程序可最小化到系统托盘，以减少干扰，并通过托盘图标菜单提供退出等功能。
学生端主要在后台运行： - 可在托盘提供图标菜单用于上传文件、查看教师信息或退出等； - 当接收到教师广播指令时，自动弹出全屏或窗口显示教师/学生屏幕内容； - 提供音频开关（静音）选项，当未被教师强制时可由学生自行控制。
•	配置文件：系统支持通过配置文件（JSON、TOML或XML均可）加载基本配置，如教师机地址/端口、学生端的姓名/ID、文件保存路径等。通过配置文件预先设定，便于批量部署（例如利用Ghost镜像分发时已包含配置）。配置文件也用于调整一些参数（如默认帧率、是否自动打开文件等）。
•	日志与调试信息：系统应记录重要事件日志（例如学生上线/下线、广播开始/结束、文件发送完成情况等）。教师端UI上可显示部分调试信息（如某学生未响应、网络延迟）以及每个连接的IP地址等[3]。这些信息既满足教师对课堂情况的掌握，也方便开发者调试定位问题。
非功能需求：
•	性能：广播应尽量高效，能够支持至少30台学生机同时在线。采用高效的屏幕捕获和传输机制，保证局域网内实时性[4]。文件传输应充分利用网络带宽，尽可能缩短分发30台机器文件的总耗时。音频传输应流畅无明显卡顿。
•	可靠性：网络通信需保证可靠传输，尤其是文件传输不得有错误。采用TCP等可靠协议，必要时加入简单校验。断线重连机制：如果学生端掉线，应能自动重连教师端；教师端应能检测掉线并更新状态。
•	安全：基本信任在封闭的局域网环境，可不对数据加密以降低复杂度。但为防误用，可设计简单认证或密码（MVP可省略）。至少应确保教师端控制指令只能来自教师机程序，学生端之间不能互相冒充。
•	可部署性：仅依赖Windows自带功能或Rust静态编译生成的可执行文件，尽量无需复杂安装。Ghost部署假设学生端软件已随系统镜像安装好并包含配置。教师端手动安装配置一次即可。
•	可扩展性：代码模块化设计，日后可添加如远程控制、屏幕监控等功能（类似Veyon的锁屏、关机等高级功能[1][3]）。协议和架构应支持拓展新的指令类型。
系统架构
总体架构概述：
本系统采用C/S架构，由教师端（服务器）和学生端（客户端）两部分组成。典型流程是学生端程序启动后自动连接到教师端，保持一个控制连接用于接收指令和状态汇报。教师端维护所有学生连接，并通过控制指令触发相应功能（广播、文件传输等）。屏幕广播的数据流可能使用单独的通道以提高效率。下面是架构示意：
•	教师端：作为服务器运行，监听预定义的TCP端口等待学生端连接。维护学生列表（包括身份信息、IP和连接socket）。教师端包含核心模块：屏幕捕获模块、音频捕获模块、广播发送模块、文件分发模块等。教师端根据用户操作（如点击“开始广播”）向一个或多个学生发送指令/数据。
•	学生端：作为客户端启动时，读取配置获取教师服务器IP和端口，自动发起连接。成功连接后，发送自身信息（如姓名ID）注册到教师端。然后进入等待状态，准备接收教师端的各种指令。学生端包含屏幕显示模块、音频播放模块、文件接收模块，以及响应教师指令的控制逻辑。平时学生端隐蔽运行，仅在需要时（如接收到广播内容或文件）才显式地呈现给用户。
•	通信方式：采用TCP作为主要传输层协议，保证数据可靠送达。可以设计两类TCP连接：
•	控制通道：每个学生和教师之间有一条持久TCP连接，用于发送控制命令和小数据（如通知、文件传输数据等）。控制通道上消息采用自定义简单协议或序列化格式（例如每条消息有类型标识和内容）。
•	数据通道（可选优化）：对于高吞吐的屏幕视频和音频数据，可以使用单独的连接或端口。MVP阶段也可复用控制连接发送，但为防止阻塞控制指令，推荐分离。例如教师端为屏幕广播开启一个专门线程向所有学生socket发送视频帧数据。
在广播模式下，教师端需要向多个学生客户端发送大量数据（屏幕帧和音频）。可以通过异步IO或多线程实现并发发送，以充分利用网络带宽[5]。Rust 的 Tokio 异步运行时或多线程库将用于保证同时服务多客户端不影响实时性[5]。
•	屏幕广播架构：教师端有两种来源的屏幕内容：
•	教师自身屏幕：由教师机直接捕获画面。教师端定期采集屏幕帧，编码后通过网络发送给各学生。
•	学生屏幕（示范学生机）：当教师选择某学生演示时，该学生端会受指令触发开始捕获自己屏幕，并将画面发送到教师端。教师端再将此画面转发广播给其余所有学生端。理想情况下，可以直接让选定学生端向其他学生端广播，但考虑实现复杂度和网络拓扑（可能学生之间未直接通信），MVP采用教师中转策略：由学生发送屏幕数据到教师，教师再分发到所有客户端。教师端在UI上可以标明“当前广播来源：学生X (IP: ...)"以便辨别。
•	音频广播架构：与屏幕类似，教师端捕获音频数据（如麦克风输入）并同步发送给学生。音频数据量较视频小，可以嵌入同一通道或独立通道发送。对于学生屏幕演示的场景，如果需要该学生的系统声音，也可考虑捕获转发，但一般课堂中主要是教师语音，因此通常音频来源只取自教师端。
•	文件传输架构：文件传输走教师与各学生间的一对一通道。教师发送文件时，对每个目标学生分别传输（可并行进行，以节省总时间）。因为文件发送是相对短时的批量行为，不需要像视频一样持续实时，所以可以简单复用控制连接顺序发送，也可以在每个连接上开启新线程传文件，防止阻塞其它指令。学生上传文件也是通过控制连接发送给教师。为了避免冲突，可以规定文件传输消息有明确的起止标记（如先发送一个文件头包含文件名和长度，接着流式发送文件内容字节）。
•	协议设计：设计一个简明的应用层协议，可能采用文本命令+二进制数据的形式或者使用JSON序列化消息。示例：
•	教师->学生：
o	BCAST_START{"mode":"teacher","display":"fullscreen"} – 命令学生端准备接收广播（mode指示来源是教师屏幕，显示模式fullscreen）。
o	BCAST_STOP{} – 命令停止当前屏幕广播，学生端应关闭显示窗口。
o	BCAST_SRC{"mode":"student","sid":123} – 通知学生端即将切换来源为某学生（ID=123）屏幕，用于更新提示（实际画面数据仍通过后续帧数据发送）。
o	FILE_SEND{"filename":"abc.pdf","size":12345} – 通知即将发送文件，跟随其后的可能是文件内容数据。
o	音频方面可能持续发送例如 AUDIO_STREAM 二进制包，每个包含一定毫秒的音频PCM数据。
•	学生->教师：
o	REGISTER{"name":"Alice","id":"S01"} – 学生上线注册信息。
o	FILE_UPLOAD{"filename":"work1.doc","size":4567} – 请求上传文件，教师端收到后准备接收接下来的文件数据。
o	HEARTBEAT – 心跳包（可选，用于检测连接健康）。
实际实现中，为简化开发也可以采用固定顺序的消息而不复杂定义格式，例如先发1字节指令码，再根据指令类型读取后续固定长度的元数据结构。但使用JSON/TOML等人可读格式有利于调试（通过日志可以直观看懂消息内容）。
•	数据压缩与优化：由于屏幕帧和音频产生的数据量大，各端应采用必要的编码压缩：
•	视频帧可使用图像压缩（如JPEG/PNG）或者视频编码（H.264等）。MVP可选择每帧JPEG压缩后发送，实现简易“逐帧MJPEG流”。这样学生端解码JPEG并显示即可，开发难度低，但带宽占用较大。
•	更高效方案可考虑集成VNC协议（RFB）来只发送差异区域[4]。Rust社区有现成的 VNC 服务器 crate，可处理多种编码和多客户端[6]。如果时间充裕，可让教师端利用 rustvncserver crate 将自己屏幕作为VNC Server发布，学生端嵌入VNC Viewer组件连接[6]。不过为赶MVP，可以先实现简单JPEG流，后续再优化传输差分[7]。
•	音频数据可以使用压缩编码如 Opus，以节省带宽并抗网络抖动[8]。MVP阶段可简化为发送未压缩PCM或较简单的ADPCM编码，确保首先实现功能。
•	错误处理：架构应考虑各种异常情况：
•	网络断开：学生端检测到和教师端连接断开时，自动尝试重连（可指数退避间隔重试）。教师端应能识别失去某学生连接并从列表移除或标记掉线。
•	广播过程中某学生未及时收到帧：因为TCP确保顺序可靠，但若某学生过慢，会拖慢教师发送线程。为防止一个慢节点影响整体，可考虑对不同学生独立发送（不同线程/异步任务)，这样某一连接阻塞不影响其他连接。此外，可以对视频帧设置一个发送队列长度上限，若学生处理不过来则丢弃过老的帧，以保持接收实时性。
•	文件传输中断：如果传输途中断开，学生端应能部分接收并等候重传。MVP简单处理为失败则提示教师重发，或在学生重连后教师界面提示哪些学生未收到。
•	多播优化：在理想网络条件下，可考虑采用UDP多播方式一次发送屏幕帧让所有学生接收，从而减轻教师端压力。但由于多播配置复杂，这属于后续改进方向，MVP不实现。
屏幕广播模块设计
教师端屏幕捕获与发送
教师端需要高效捕获屏幕内容。Windows平台可使用DXGI Desktop Duplication API进行屏幕捕获，它能以高性能获取屏幕帧和差异区域[4]。Rust中有封装该API的crate（如dxgi-capture-rs），提供了对DXGI的安全接口，可高效捕获屏幕内容[4]。使用该接口，教师端可每隔固定时间（例如100ms，对应10fps）捕获当前屏幕的图像。
捕获到的图像帧需要进行编码压缩以发送： - MVP实现可直接使用Rust的图像库将帧缓冲编码为JPEG格式，质量可调节以平衡清晰度和带宽。JPEG压缩大幅减少数据量，利于网络传输。 - 另一种选择是使用VNC/Tight编码。正如开源的Veyon/ iTALC这类课堂软件所做，他们在教师机上运行VNC服务，将屏幕变化通过如Tight或ZRLE等增量编码发送[5]。Rust的rustvncserver crate支持11种常见VNC编码（Raw、Hextile、ZRLE等）并可异步向多客户端发送差分帧[5]。这可以极大提高效率，但实现复杂度也较高。如果MVP时间不允许，可暂不采用完整VNC方案。
教师端在开始广播时，会遍历所有当前在线的学生连接，通过每个连接发送屏幕帧数据。建议为每个连接启动一个异步任务/线程，不同学生独立发送帧，以并行利用多核和避免互相阻塞。这样即使某个学生端处理慢，其他学生仍可流畅接收[5]。
数据格式：对于JPEG帧方案，每帧发送可以这样处理： 1. 教师端捕获并JPEG编码出frame.jpg字节数组。 2. 在控制/数据通道上先发送一个帧头，如FRAME {length: N}（或固定4字节长度字段），紧跟其后发送N字节的JPEG数据。 3. 学生端按照协议读取N字节后组装成完整JPEG，再解码显示。
若采用VNC方案，则无需自行定义帧格式，由VNC协议处理（学生端需实现/集成VNC Viewer）。
切换来源（学生屏幕）：当教师选择某学生X屏幕广播时： - 教师端发送指令通知所有学生客户端：“即将显示学生X的屏幕”，以便学生端界面上可以提示来源变化。 - 教师端同时发送指令给学生X客户端：“开始捕获并发送屏幕”。学生X将按设定帧率捕获自己屏幕帧（也可用DXGI）并经网络发送到教师端。由于学生X可能性能不及教师机，帧率可稍低如5-8fps确保流畅。 - 教师端接收来自学生X的屏幕帧数据（需要在教师机上为该学生开辟一个接收线程/端口）。然后教师端充当转发器，将此学生帧再广播发送给其他所有学生客户端（类似地编码成JPEG帧分发）。理想情况下教师不需要解码再编码，可以直接将收到的JPEG帧原样广播以避免二次损耗。前提是学生X按统一格式压缩帧，比如也JPEG压缩。为简化实现，可以约定教师和学生X都用相同JPEG质量编码帧。 - 教师端自己也可以显示学生X的画面供老师参考。可在教师界面上开一个预览窗，或老师直接看到学生X屏幕的话也可以通过本软件实现（例如教师端也临时作为一个客户端去渲染学生X的帧）。
当停止学生屏幕广播或切换回教师屏幕时，通知学生X停止发送，其余学生恢复显示教师屏幕内容。
学生端屏幕接收与显示
学生端在收到教师端的广播指令后，需要弹出窗口显示画面。实现细节取决于广播模式： - 全屏模式：学生端创建一个无边框全屏窗口，覆盖当前屏幕（可以使用Win32 API设置窗口 style 为WS_POPUP并最大化到屏幕大小）。该窗口应置顶显示，且可以考虑屏蔽学生的输入（可行的话，通过捕获输入或者在UI上不响应，以达到锁屏效果）。窗口内部一个画布用于绘制收到的帧。 - 窗口模式：学生端创建一个普通可调整大小的窗口（初始可能居中屏幕，大小合适比例）。学生可以最小化或关闭该窗口，但教师端应能检测窗口是否关闭（MVP可不强制，窗口模式主要用于非强制演示）。
帧接收解码：学生端从网络连接按协议读到帧数据后，需将其转换为图像： - 对于JPEG方案：使用Rust的图像解码库（如image crate）将JPEG字节解码为RGB bitmap。然后在窗口的绘制上下文中渲染。Windows上可以用GDI+、Direct2D等绘图API。简单方法是使用GDI：创建与窗口兼容的内存位图，把解码后的像素写入位图，然后用BitBlt复制到窗口DC进行显示。由于Rust可以通过windows-rs调用Win32 API，这些步骤可在Rust中完成。亦可考虑使用高速绘图库，如SDL2或OpenGL，将JPEG解码后作为纹理贴图到全屏四边形上显示，这对动态刷新效率更高。但MVP用GDI已可满足低帧率要求。 - 对于每帧像素量较大的（如1080p全屏），解码和绘制需要优化：可以重用内存区域，避免频繁分配。尽量在后台线程完成解码，再将成品位图提交UI线程绘制。这样帧到达和显示解耦。 - 如果帧采用差分更新（如VNC Hextile等），学生端需要维护一块屏幕framebuffer，收到差分指令就更新对应区域再刷新显示。实现较复杂，暂不考虑在MVP。
帧率控制：学生端尽量按收到的帧立即显示，但教师端可根据需要控制发送帧率，因此无需学生端自行定时刷新。为了防止窗口渲染过于频繁影响性能，可以简单地做到每收到一帧就画一帧。若帧堆积，则可以丢弃旧帧。
广播状态：学生端应能根据指令判断当前是否在广播状态，以决定UI显示。例如在托盘图标上显示一个状态“正在观看教师演示”。当广播停止，学生端应自动关闭广播窗口并恢复初始状态。
音频广播模块设计
教师端音频捕获与发送
教师端提供开启音频广播的选项。开启后，系统捕获教师端的音频输入流。常见需求是捕获麦克风（教师讲话），有时也需要捕获系统声音（例如教师播放视频给学生看，则希望学生听到视频声音）。Windows提供WASAPI接口来捕获音频输入或环回输出。Rust有wasapi crate 封装了WASAPI，可安全地进行音频采集和播放[9]。
实现步骤： - 初始化WASAPI音频采集，选择合适的设备： - 若只支持麦克风，就选系统默认录音设备。 - 如果也考虑系统声音，可选用WASAPI的loopback模式获取系统扬声器混音输出[10]。 - 配置采样率和通道，如44.1kHz或48kHz，单声道（麦克风通常单声）足矣。获取音频帧数据（PCM样本）以一定帧长（比如20ms的音频约对应882帧（44.1kHz）2B=1764B，如果双声道则2）。 - 将这些音频帧打包通过网络发送。可以有两种方式： 1. 与视频同通道交织：例如在视频帧数据之间穿插音频数据包，或将音频作为独立消息类型经控制通道发送。由于音频数据频率高（每秒50个20ms帧），可能频繁占用通道，建议独立线程发送。 2. 单独音频通道：开启一个UDP或TCP连接专用于音频流。UDP适合实时音频因允许丢包，但为简化实现可靠性，TCP也可用（小延迟场景下TCP也能胜任VoIP）。
•	音频压缩：为减少带宽，可使用Opus等编码将PCM压缩[11]。Rust有如audiopus crate 可以封装Opus编码[12]。如时间不足，可暂发送未压缩PCM或简单ADPCM编码。这在局域网下几十台情况下带宽仍可承受（例如16-bit 44.1kHz mono PCM ~86KB/s 每学生，30人约2.58MB/s）。
•	同步：完美同步音频视频在MVP中不是刚需，但可以尝试将时间戳随帧发送，以便学生端根据时间戳对齐播放。如果不处理，同步偏差小的情况下人耳也许难以察觉。MVP阶段可以忽略同步复杂性，只要延迟相对接近即可。
教师端在UI上提供音频广播的开关控件。当关闭时，不采集或发送音频帧。打开时开始采集发送。另外提供强制播放选项：当勾选强制时，意味着要求所有学生端取消静音强制播放老师声音。这状态可随同控制指令发送给学生端。
学生端音频接收与播放
学生端启动时应初始化音频播放设备（使用WASAPI选择默认扬声器播放）。Rust的wasapi crate也支持音频播放输出[9]。或者使用cpal crate创建一个 output stream，方便播放连续PCM流。
当学生端接收到音频数据包（例如每帧20ms PCM），应将其写入音频缓冲进行播放： - 由于网络和处理存在抖动，采用一个小缓冲队列存放收到的音频帧，持续输出。保证缓冲不空。如果缓冲过大导致明显延迟，则可以权衡缓冲大小。MVP可简单实现为一边接收一边播放，如果出现短暂中断也接受。
音频静音控制： - 学生端提供一个“静音”选项给用户。当静音时，可以直接丢弃收到的音频数据或者不输出到扬声器。 - 当教师端强制音频时，学生端接到指令应取消静音。这可以通过程序上将之前的静音标志忽略或者弹出提示“教师开启了强制音频，已自动取消静音”。后续也可以降低学生音量而非完全静音，以满足特殊需求，但MVP按简单逻辑处理。 - 学生端UI上（如托盘菜单）可有静音勾选项，如果强制则临时灰置不可选。
播放实现： - 利用wasapi或cpal创建持续播放流，需要实现一个回调或循环，不断从接收缓冲取音频帧喂给音频输出设备。 - 注意音频格式需匹配，双方约定好，比如16-bit PCM, 1-channel, 44.1kHz。学生端按此格式初始化设备。 - 如果使用Opus压缩，则学生端需先解码Opus帧得到PCM，再播放。Rust有Opus解码库，可使用FFI绑定libopus或audiopus crate。 - MVP可以不处理音频与视频严格同步，但可尝试简单同步：例如在每个视频帧中附带一个时间戳，音频帧也带时间戳，学生端可以根据时间戳略微延迟播放某些帧以对齐。由于复杂度较高，可在后续改进。
文件传输模块设计
教师端发送文件
教师端能够选择文件发送给学生。UI上，教师可点击“发送文件”按钮，弹出文件选择对话框（Win32常规对话框）。选定文件后，程序获取文件大小和名称。然后执行以下流程： - 选择目标：MVP假定发送给全体学生。如果需要单独发送，可在UI上选择特定学生或群组再执行发送。此处按需求至少实现发送全部学生。 - 教师端对于每个学生的连接，发送一个文件传输请求头，如：FILE_SEND{"name":"<文件名>","size":<字节长度>}。然后逐字节（或以块）读取文件内容，通过该连接写出。[2] - 传输过程中，可以显示进度。例如文件大小已知，每传一部分可以更新教师端界面上该学生的进度百分比。若并行对多学生发送，可在总界面显示整体进度，或者显示每个学生一个进度条。 - 如果文件较大，采用分块读取发送避免占用太多内存。比如每次读4KB发送，循环直到结束。 - 完毕：对每个学生，发送完内容后，可以发送一个结束标记或等待学生端确认收到完毕（例如学生端返回FILE_RECV_DONE消息）。教师端收齐确认后，可在界面提示“文件发送完成”。
考虑到同时给几十台发送大文件耗时长，可以并发发送： - 采用多线程或异步IO模型让每个连接独立发送。这会用尽磁盘IO和网络带宽但加快总时间。Windows一般网络带宽足以同时传30份文件，只要教师机和交换机性能OK。MVP实现可以逐个也可以并发，视开发便利性决定。 - 若带宽成为瓶颈，可考虑先发送一次再广播分发，但受限于网络拓扑，暂不深究。或者让学生端之间P2P分发，但复杂度太高，无需实现。
学生端接收文件
学生端监听控制连接上的FILE_SEND指令。一旦收到，解析出文件名和大小，准备接受内容： - 保存路径：可以预先配置，比如默认保存到C:\Users\<用户>\Desktop\或D:\ClassFiles\目录。或配置文件指定download_path。若文件重名可采取重命名或覆盖策略。MVP中简单处理为覆盖同名文件（或在文件名加编号避免冲突）。 - 学生端创建/打开目标文件，以二进制写模式。 - 按协议从连接中读取指定大小的数据。一边读一边写文件，防止一次性占用大量内存。确保收到字节数与宣称大小匹配。 - 期间可以在本地做简单校验，比如累积字节数，完成后对比大小是否一致。如有不符，可通知教师端（发送错误消息）或者重请求丢失部分。因为用TCP基本不会丢字节，所以除非断线一般不会错。 - 接收完成后，关闭文件句柄。然后可以： - 自动向教师端发送确认消息。 - 在学生端界面上给出通知，比如托盘气泡：“老师发送的文件 XYZ.pdf 已接收”。如果MVP不做UI通知，也至少记录日志。 - 打开文件（可选）：某些场景老师希望学生立即打开文件学习。可以在教师发送指令里增加参数，比如open:true，学生端收到后，用Shell执行默认程序打开该文件[13]。MVP实现此可选，默认不自动打开以免干扰（或提供配置项控制）。
学生端上传文件
当学生需要交作业或上传文件，操作方式： - 学生端UI提供“上传文件”入口（可能在托盘菜单或一个小窗口按钮）。点击后弹出文件选择对话框，学生选定要上传的文件。 - 学生端读取文件名和大小，发送给教师端一个FILE_UPLOAD请求头（含名称、大小）。教师端看到该请求，可以选择自动接受或在UI上提示老师。同一局域网可信环境，MVP可直接接受无需人工确认。 - 然后学生端开始读取文件数据，通过控制连接发送。类似发送到教师和发送文件到学生的过程，依然分块发送确保大文件不会一次吃光内存。 - 学生端发送完后，可等待教师端回应（比如UPLOAD_OK), 然后提示学生“上传成功”。若超时或断开，则提示失败并可重试。
教师端接收学生上传： - 教师端监听来自学生的FILE_UPLOAD请求。收到后，可以在界面显示 “学生X正在上传文件Y...”（或如MVP不做确认则直接处理）。 - 教师端确定保存位置：可有一个专门的“上传文件”目录，例如C:\ClassUploads\，或在此目录下按学生姓名建子目录分类保存。方便老师日后查找哪个学生提交了什么。如果没有子目录，也可以在文件名前加前缀如Alice_作业1.doc来标识来源。 - 然后教师端读取后续文件数据并写入磁盘文件。流程和学生接收类似：按照协议长度读取直到完成。写文件时亦可边收边写。 - 完成后，教师端发送确认给该学生。如果教师端有UI界面，可以在某个“收到的文件”列表中增加一条（列出文件名、来自学生）。老师可以打开该文件夹查看文件。MVP实现可以简单地把上传文件放到预设文件夹，不做复杂界面，只在日志或文本区域提示“收到Alice上传的 work1.doc”。
文件大小和错误处理
•	大小限制：可在协议层规定最大文件大小（例如默认不超过100MB）以防极端情况撑爆内存或耗费太长时间。若超出可拒绝传输。MVP可不严格限制，但要注意如果非常大文件会较慢。
•	传输中断：如果教师端在发送文件过程中某学生掉线，中断后教师端会得到写错误异常。教师端应捕获该异常，记录该学生发送失败。UI上可提示“发送给学生X失败”。稍后可重试发送（自动或人工触发）。
•	对于学生上传，若教师端断线或取消，也要通知学生失败。
•	多文件支持：MVP可以一次发送一个文件。如果需要发送多个文件，教师端UI可能允许多选文件然后逐一发送。为实现原子性，也可将多个文件打包成一个压缩包发送，减少次数。这个功能在Veyon中也有[14]（“仅传输/传输并打开”等模式）。如有时间可实现简单打包，否则MVP逐个发送也可以满足需求。
教师端用户界面设计
教师端应用为老师提供全面控制视图，主要界面元素包括：
•	学生列表区：界面主体是一个学生计算机列表，表格或网格形式展示。每行显示一个学生，例如“姓名（或学号） - 电脑IP/主机名 - 状态”。状态可以指是否在线以及当前是否在观看广播等。列表支持点击选择某个学生，用于执行针对单一学生的操作（如广播其屏幕、单独发送文件）。如果实现预览功能，列表项旁边可留出一个小缩略图区域实时显示学生屏幕缩略图（MVP可不做实时预览，以节省时间）。
•	控制按钮/工具栏：在窗口上方或侧边放置操作按钮：
•	“开始演示”按钮：用于开始教师屏幕广播给全班。点击后，可以有选项选择模式，全屏或窗口。如果模式固定，可以在点击后默认全屏模式，并在需要窗口模式时再设置（或者在设置里有默认选项）。开始演示后，该按钮变为“停止演示”以便结束广播。
•	“广播学生屏幕”按钮：可以下拉一个菜单列出当前在线学生，让老师选择要广播的学生。或者要求老师先在列表选中学生，再点击此按钮。触发后流程：停止当前广播（如果有）-> 通知该学生开始分享屏幕 -> 教师端开始转发 -> 学生端显示。UI上此按钮在激活状态时可高亮提醒正在广播学生屏幕，停止后恢复。
•	“停止广播”按钮：独立的停止控制（如果未合并在开始按钮中）。用于无论教师屏幕或学生屏幕广播，都统一停止。停止后发送指令给学生端关闭显示窗口。
•	“发送文件”按钮：点击打开文件对话框，选文件后开始发送给所有学生。可扩展为发送给选中的学生（如UI上多选学生列表再点发送文件，只发给那些）。MVP实现全发即可。发送过程中，该按钮或界面可以呈现发送进度，比如变灰显示“发送中…XX%”。
•	（可选）“收集文件”按钮：一键请求所有学生上传文件（例如下课收作业）。这会向学生端发送请求，学生端弹出对话框让学生选择文件提交。这是扩展功能，MVP可不实现，但UI可以留空位。
•	“音频”开关：这可以是一个Toggle类型按钮或复选框，标记“广播音频”。勾选则开始传输教师声音。旁边也可有一个“强制播放”子选项，当选择时，在学生端强制解除静音。这两个可以组合为一个按钮：“音频广播(强制)”之类，根据状态切换。
•	其他次要功能可以在菜单栏中提供，例如“发送文本消息”“远程命令”等（这些超出当前范围，只占位不实现）。
•	菜单栏：提供文件、设置等菜单。
•	“设置”菜单中允许配置选项，如教师端监听端口修改、默认保存路径、更改教师姓名（若需要显示给学生）等。也可以编辑配置文件路径。MVP里可简单实现读取配置文件而无GUI设置界面，为速度考虑可不做复杂设置对话框。
•	“日志/调试”菜单：可以打开日志窗口，实时显示系统日志（连接情况、错误等）。这对开发和调试有帮助，但老师实际使用不一定需要界面看日志，可隐藏或放在调试模式。
•	“关于”菜单：版本信息等。
•	状态栏：在主窗口底部显示简要状态，如“已连接学生: 25/30 当前模式: 空闲/广播中 数据源: 教师屏幕 音频: 开启(强制)”等。方便老师了解当前系统工作状态。
•	悬浮工具栏：这是辅助UI，不在主窗口内，而是一个独立始终置顶的小条。设计为细长条（高度几像素到十几像素），贴于屏幕顶部中央（或教师可配置位置）。默认显示内容可以很简洁，例如“课堂控制(悬停展开)”。当鼠标移上去时，扩大显示常用按钮，比如：
•	开始/停止演示（状态指示红绿灯形式）
•	切换显示来源（一个按钮，点击循环在“教师屏幕”、“学生X屏幕”之间，如果有多个可用来源则弹出选择列表）
•	音频开关小按钮
•	一个展开主窗口的按钮（或者双击栏体也可打开主界面）
实现上，这可以用Win32的无边窗+定时检测鼠标位置实现。悬浮栏应该能够随时获取焦点但又不影响教师做其他操作（比如教师在演示PPT时，希望工具栏浮在上方但不截获键盘）。可考虑设置窗口透明点击穿透，当鼠标不在上面的时候。这需要一些Win32技巧，MVP可以先做成普通置顶窗口但体积小不太碍事即可。
•	托盘图标：教师端最小化时会缩到Windows系统托盘（通知区域），显示一个自定义图标（比如小黑板图标）。托盘右键菜单提供基本操作：
•	打开主界面
•	退出程序（需要二次确认以防误点退出）
•	（可有）开始/停止广播快捷项等
UI设计注重易用性：老师一眼就能明白各按钮含义（可加图标或文字标签），操作尽量简化。如要广播学生屏幕，只需两步：点选学生->点“广播学生屏幕”。发送文件也尽量一步操作到位。界面布局以熟悉的教师课堂软件为蓝本，比如Veyon的界面[3]（有电脑列表和上方工具栏）。
学生端用户界面设计
学生端UI原则上轻量隐蔽，以免妨碍学生正常操作，又能在需要时提供交互：
•	启动与托盘：学生端程序开机自动启动并在后台运行。启动后连接教师端成功与否，都在托盘放一个小图标指示（比如灰色表示未连接，绿色表示已连接上教师）。大部分时间学生不会和该程序交互。
•	托盘菜单：学生可右击托盘图标看到菜单项，如：
•	“上传文件...”：点击后弹出文件选择框，选完即上传给老师（等同于提交作业）。上传中图标或菜单可以有进度/提示。
•	“静音教师音频” or “取消静音”：根据当前音频接收状态切换。让学生在非强制时可以选择不听声音。
•	“显示教师信息”/“关于”：可以显示本软件的关于对话框，注明教师端IP、版本等调试信息。
•	“退出”：学生一般不应退出客户端，否则老师无法控制。但可留此选项用于调试或异常情况退出。若要防止学生私自退出，正式使用时此选项可以去掉或加密码。MVP阶段保留以便测试。
•	广播显示窗口：当老师开始屏幕广播时，学生端弹出专门窗口显示内容：
•	全屏模式：窗口覆盖全屏并无边框。为了防止学生随意关闭，可不提供常规关闭按钮（Alt+F4可能还能关，但老师可发现谁下线了）。可以在屏幕中央下方显示一个提示文本，例如“教师演示中，按Esc退出”（如果允许退出）。不过若强制全屏应该不允许Esc退出，所以可以忽略退出提示。
•	窗口模式：窗口标题例如“教师演示”，带普通窗口边框，学生可以像看视频那样摆放它。允许最小化/关闭，因为这是非强制的。
•	窗口内容区黑背景，居中绘制画面（如果学生屏幕分辨率与视频分辨率不一致，可等比例缩放或拉伸填满）。若怕失真，可考虑不拉伸而在周围留黑边。
•	如果当前广播来源是某个学生，窗口上可以显示“正在观看 学生X 的屏幕”字样，以免混淆。
•	音频：如果音频打开且未静音，则窗口不需要特别UI，声音直接从系统输出。但可以在全屏窗口里也加个小喇叭图标指示声音状态。
•	提示信息：学生端尽量少打扰。但在一些事件上可以给提示：
•	接收到文件：弹出气泡：“老师发送了文件 X 已保存到 D:\Downloads”。或全屏时在角落短暂显示提示。
•	老师请求上传文件（若实现批量收作业功能）：弹出模态对话框让学生选文件并确认上传。
•	断开连接：如果学生端与教师端连接断了且长时间无法恢复，可以在托盘上显示红色叉图标并提示“未连接教师服务器”。这对排查网络问题有用。
•	配置：学生端几乎无设置界面，一切从配置文件读取。若需要让学生改，比如错误配置了教师IP，可允许学生右键托盘 -> 设置... 弹出一个对话框显示当前配置项(教师IP等)供修改。但通常这些在部署时预先配置好学生不需要动。所以MVP可以没有此UI，由维护人员直接改配置文件。
•	调试：可以有隐藏的调试窗口在学生端，输出日志（比如按某快捷键打开）。开发时用，发布时关闭。
综上，学生端UI非常简洁，正常上课时除非老师广播或发送文件，学生几乎感觉不到它的存在。
配置与日志
配置文件
使用配置文件使得部署和调试更方便。考虑采用JSON或TOML格式（Rust对这两者支持好，Serde库可直接映射）。例如：
教师端配置 (teacher_config.toml):
listen_port = 5000
enable_audio_by_default = false   # 默认是否开启音频广播
force_audio = false              # 默认是否强制学生播放
save_upload_dir = "C:/ClassUploads"   # 学生上传文件保存路径
file_auto_open = false           # 学生端收到文件后是否自动打开
（教师端也可配置认证信息比如密码等，MVP略）
学生端配置 (student_config.json):
{
  "teacher_ip": "192.168.1.100",
  "teacher_port": 5000,
  "student_name": "Alice",
  "student_id": "S01",
  "auto_fullscreen": true,
  "download_path": "C:/Users/Alice/Desktop",
  "auto_open_file": false
}
- teacher_ip：教师机服务器地址（Ghost部署时可统一写入正确的教师机IP或通过DNS名定位）。 - student_name/id：用于教师端显示身份，可从学校学号库配置。 - auto_fullscreen：是否教师广播时默认全屏。如果false则即使教师请求全屏模式，学生端也窗口化显示（除非教师强制的逻辑在程序里覆盖配置）。一般由教师决定，所以这个可能不用配置，留作手动调试用途。 - download_path：学生端文件保存路径，可因磁盘布局调整，默认用户桌面。 - auto_open_file：收到文件后是否立刻打开，用于老师下发资料立即浏览的场景。
配置文件在程序启动时读取，解析填入全局配置结构。如果配置缺失或格式错误，程序应给出错误日志并使用默认值。
日志记录
日志可以帮助在开发和部署时了解程序行为。我们在教师端和学生端均实现日志： - 日志内容：包括时间戳和事件描述。例如： - 学生端启动/连接：“[10:05:01] Connecting to teacher 192.168.1.100:5000...” - 学生端连接成功/失败：“[10:05:02] Connected to teacher. Student ID = S01” - 学生端收到广播开始：“[10:10:00] Broadcast start (Teacher screen, fullscreen)” - 学生端收到文件：“[10:20:00] Received file 'Lesson1.pdf' (500KB) saved to C:\Users\Alice\Desktop” - 教师端启动监听：“[9:00:00] Teacher server listening on port 5000” - 教师端学生上线：“[9:05:10] Student 'Alice(S01)' connected from 192.168.1.21” - 教师端开始广播：“[9:30:00] Started broadcasting teacher screen in fullscreen to 30 students” - 教师端切换广播来源：“[9:40:00] Broadcasting screen of student 'Bob(S02)'” - 教师端文件发送完成：“[9:50:00] File 'Quiz.docx' sent to 30 students (success:29, failed:1)” - 错误情况日志：“[9:50:10] ERROR: Failed to send file to Bob(S02) - connection lost.”
•	日志输出：同时打印在控制台（方便直接运行程序调试）以及写入日志文件（如teacher.log, student.log）。日志文件按日期滚动或大小限制，以免无限增长。
•	日志级别：支持DEBUG/INFO/WARN/ERROR级别筛选。普通运行以INFO为主，DEBUG级包含更细致的信息（例如收到每个帧数据大小等，可在调试开启）。
教师端还可以在UI上提供一个日志查看窗口或标签页，将最近的日志内容滚动显示。这对于老师不是必要功能，但对开发者观察状态有帮助。MVP可将日志主要用于开发调试，不要求教师实际查看，因此UI日志视图可以延后。
调试信息显示
除了日志，程序某些UI直接显示关键调试信息: - 教师端学生列表中可以在tooltip或副栏显示每个学生IP、延迟（如pong延迟）、最后心跳时间等。 - 教师端悬浮栏如前述显示当前源和连接统计。 - 学生端托盘tooltip可以显示“已连接教师端(192.168.1.100)”或“未连接”。
这些信息让运维人员快速判断网络连接情况。如果老师对这些不关心，可以放在不明显的位置或需要操作才显示 (比如悬浮才出现)，避免界面杂乱。
开发计划
由于时间紧迫（预期一晚完成MVP），开发将分阶段聚焦核心功能，确保能用再扩展细节：
1.	基础网络通信：先使用Rust的Tokio建立服务器-客户端通信框架。实现教师端监听TCP端口，学生端自动连接。交换基本信息（注册姓名）。测试多学生并发连接管理。确保心跳或断线检测机制基本可用。
2.	屏幕捕获与显示：在单机上模拟：让教师端捕获自己屏幕并在本地先保存图片或显示窗口，验证DXGI捕获和JPEG编码流程[4]。然后实现教师端发送一帧图像到一个学生端，学生端收到后显示在窗口。调通后扩展为循环连续发送帧形成简单视频流。
3.	广播多客户端：将单个学生的显示推广到多个连接。处理并发发送，观察性能。调节帧率和JPEG质量，找出在典型网络下的流畅度。确保全屏/窗口模式在学生端正确创建窗口显示。
4.	学生屏幕转发：实现教师端请求某学生屏幕：简单起见，先在教师机和一学生机之间测试——学生捕获屏幕发送，教师接收显示。然后在教师端接收到后再发送给其他学生。调试这个“学生→教师→多学生”的链路，关注延迟和正确性。UI上加标识当前来源切换，确保各端能正确响应开始/停止。
5.	音频传输：实现教师端麦克风采集并播放到一个学生的扬声器（点对点测试）。然后并行发送给多学生，调整缓冲避免杂音。加入教师端音频开关控制和学生端静音控制逻辑。由于音频与视频结合可能增加复杂度，此步如果遇阻，可以降低优先级，仅实现基本音频发送播放功能即可，必要时音频部分可在演示时暂不启用。
6.	文件发送：实现教师端发送文件到一个学生：包括文件对话框->发送->学生保存的流程。确保文件内容正确传输（对比MD5或大小）。然后扩展至并行发送给N个学生，记录成功失败。完善学生端保存逻辑（路径、命名）。这一功能相对独立，可并行进行。
7.	文件上传：实现学生端选择文件上传到教师：包括教师端接受保存。可先做单客户端测试，再多学生同时上传的情况（若有时间）。UI上教师显示收到文件列表或者简单弹窗。
8.	教师UI搭建：基于前面功能，搭建完整的教师端界面：
9.	可能使用Windows原生GUI库。可选方案：
o	直接使用windows-rs调用Win32 API构建窗口和控件。这需要编写消息循环和窗口过程，较底层但可精确掌控UI元素。
o	使用Rust的现成GUI框架，如native-windows-gui (NWG)[15]或fltk-rs等，快速布局按钮和列表。NWG是轻量封装Win32控件的crate[15]，适合本地Windows GUI。
o	由于时间紧张，NWG可能让创建按钮、列表更简单。我们可采用NWG布局主窗口，包括ListView控件显示学生列表、Button控件等。
10.	实现按钮事件处理：调用之前写好的网络逻辑。如点击“开始演示”->调用开始广播函数；选择列表某学生+点“学生屏幕广播”->调用相应函数等。
11.	界面更新：比如学生连接上来后，在列表增加项；学生掉线标红或删除。
12.	悬浮工具栏：这个需要操作较底层的Win32功能（透明窗口等），可简化为先实现一个置顶小窗口，hover展开。在MVP有限时间内，如难以完善，可提供一个简易版本：比如一个始终置顶的小按钮，点击打开主界面。后续再优化成真正悬停展开效果。
13.	学生端整合：学生端主要无界面，可能用托盘菜单+窗口显示。因此：
14.	用Win32 API创建隐藏主窗口（用于托盘图标关联）或服务方式运行，然后添加通知区图标（Shell_NotifyIcon WinAPI）。
15.	实现托盘右键菜单，用WinAPI创建菜单项（上传文件/静音/退出）。
16.	绑定菜单动作：上传->文件对话框->调用上传逻辑；静音->切换标志；退出->安全断开连接然后关闭程序。
17.	广播显示窗口前面已实现，此处集成：当接收到广播开始命令时，用CreateWindow创建显示窗口（或用SW_SHOW一个预先创建隐藏的窗口）。
18.	处理全屏窗口的ESC键或Alt+F4，根据是否允许退出决定行为。全屏可以拦截键盘（RegisterHotKey或低级钩子），但MVP或许不细做。
19.	学生端也无需复杂框架，用Win32直接足够，毕竟界面元素少。
20.	测试和调整:
o	在本地模拟多客户端（可以开多进程或线程模拟几个学生）测试广播和文件性能。
o	在实际两三台电脑上测试广播效果，调整帧率、分辨率（必要时降低分辨率如每帧缩放到720p发送以减负）。
o	测试音频同步播放效果。
o	异常测试：网络断开、教师端重启后学生重连、一个学生掉线重连流程、文件传输中断恢复等。
o	根据测试结果修复Bug、调整UI细节。
21.	完善和交付:
o	补充未完成的次要特性（如悬浮栏的细节）。
o	清理调试输出、确认日志记录级别恰当。
o	打包发布：由于Rust生成单可执行文件，很方便。确保将所需的配置文件模板或示例提供，使用说明文档准备好（如Ghost镜像部署时需要注意配置IP）。
o	未来改进的功能列表整理，以便后续迭代。
以上步骤中，核心屏幕广播和文件传输优先确保实现，其它如音频和精美UI在时间不够时可以简化。例如悬浮工具栏若来不及可以暂不提供，只留普通窗口操作。音频如果实现困难可暂时关闭该功能开关。然而根据需求音频是需要的，尽量实现基本功能。
未来改进与扩展
由于MVP聚焦基本功能，还有许多可改进之处：
•	视频编码优化：引入实时视频编码（H.264/H.265）以降低带宽占用、提高帧率。可利用硬件编码器（如通过Media Foundation API或FFmpeg库）。学生端用对应解码播放，从而实现高清低带宽的屏幕广播。
•	差分传输：利用DXGI提供的dirty rectangles信息[7]，只发送屏幕改变的部分，提高帧率和效率。Rust crate已经能获取这些元数据[7]。结合此信息以及比如zlib压缩，可以大幅减少静止画面的流量。
•	多播/组播：在交换机支持的前提下，用UDP多播发送一份数据包，所有学生加入组播组接收。这样教师端网络压力不会随学生数量线性增加。不过实现需考虑丢包重传机制，可能引入FEC等技术以保持画面完整。
•	更丰富的课堂管理功能：例如教师端远程控制学生电脑（关机重启、锁定输入等），发送文本消息给学生（如提醒信息）[1]。也可以监视每个学生屏幕缩略图（需要学生端持续截屏发送，消耗较大，但可选降低频率如每秒1帧缩略图）。
•	跨子网/互联网支持：目前设计假定局域网直连。未来可添加服务器中转或P2P打洞，使学生在家通过VPN也能加入课堂[16]。安全上可加密数据传输（TLS）和身份认证机制。
•	更完善的权限：目前教师全权控制，未来可细化权限配置，比如允许助教机器也能进行广播控制，或者不同学生组分别广播不同内容（分组教学）。
•	UI/UX改进：
•	提供更现代的界面，使用图标和国际化文本。
•	学生端全屏广播界面增加退出提示或聊天反馈渠道（比如学生举手按钮，但这属于更高级功能）。
•	悬浮工具栏效果优化，如隐藏时半透明仅1-2像素高，鼠标碰到屏幕顶边才出现，避免误碰。
•	增加快捷键：比如老师按某组合键快速开始/停止广播而不必鼠标点，提高课堂操作流畅度。
•	错误恢复：提升健壮性，如传输中断自动续传文件，从学生端缓存断点继续。音视频同步更加精确，通过缓冲和时间戳校准避免声音画面不同步。
•	性能监控：在教师端显示当前CPU、网络占用，让老师知道系统负载。如果过高可以主动降低帧率或暂停片刻。
本设计方案为MVP实现提供了详细的蓝图和技术选型依据，所列功能在现有技术下均可行。例如开源的Veyon软件已经证明了在课堂环境中实现屏幕实时演示、文件分发等功能的可行性[1][2]。本方案通过Rust语言及Windows API的结合，利用高性能屏幕捕获[4]和成熟的网络库，实现了类似Veyon的核心功能但聚焦于当前需求。后续随着功能拓展，可逐步达到商用课堂管理软件的水准。确保在有限的开发时间内完成MVP的基础上，预留扩展空间，使系统能够在实际教学中稳定运行并提升课堂互动效率。
Sources:
1.	Dustin McAfee, rustvncserver crate documentation – Rust VNC服务器实现，支持多种编码和Tokio异步多客户端[6][17]
2.	Veyon 用户手册 – 开源课堂管理软件Veyon的特性，包括全屏/窗口演示教师屏幕[1]和文件分发功能[2]
3.	Robby, dxgi-capture-rs crate – 提供Windows DXGI桌面复制API的高性能Rust接口，用于高效捕获屏幕[4]
4.	Henquist, wasapi crate documentation – Rust对WASAPI音频捕获和播放的安全封装，可用于麦克风录音和扬声器输出[9]
________________________________________
[1] [3] [16] networking - A "teacher" software to broadcast my screen to the students' computers - Ask Ubuntu
https://askubuntu.com/questions/968647/a-teacher-software-to-broadcast-my-screen-to-the-students-computers
[2] [13] [14] Program features — Veyon 4.9.7 documentation
https://docs.veyon.io/en/latest/user/features.html
[4] [7] dxgi-capture-rs 1.1.7 - Docs.rs
https://docs.rs/crate/dxgi-capture-rs/latest
[5] [6] [17] rustvncserver - Rust
https://docs.rs/rustvncserver/latest/rustvncserver/
[8] libopusenc - Rust - Docs.rs
https://docs.rs/libopusenc
[9] wasapi - crates.io: Rust Package Registry
https://crates.io/crates/wasapi
[10] AudioClient in wasapi - Rust - Docs.rs
https://docs.rs/wasapi/latest/wasapi/struct.AudioClient.html
[11] xiph/opus: Modern audio compression for the internet. - GitHub
https://github.com/xiph/opus
[12] audiopus - Rust - Docs.rs
https://docs.rs/audiopus
[15] gabdube/native-windows-gui: A light windows GUI toolkit for rust
https://github.com/gabdube/native-windows-gui
